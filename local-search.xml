<?xml version="1.0" encoding="utf-8"?>
<search>
  
  
  
  <entry>
    <title>Ai绘画本地部署使用</title>
    <link href="/2023/03/23/Ai%E7%BB%98%E7%94%BB%E6%9C%AC%E5%9C%B0%E9%83%A8%E7%BD%B2%E4%BD%BF%E7%94%A8/"/>
    <url>/2023/03/23/Ai%E7%BB%98%E7%94%BB%E6%9C%AC%E5%9C%B0%E9%83%A8%E7%BD%B2%E4%BD%BF%E7%94%A8/</url>
    
    <content type="html"><![CDATA[<p>本篇主要介绍stable_diffsion的本地部署过程以及有哪些坑。</p><span id="more"></span><p>AI部署参考的主要教程是<a href="https://space.bilibili.com/12566101?spm_id_from=333.337.0.0">B站秋葉aaaki</a><br><br>下载他的最终版整合包，然后自己配置环境，没有使用启动器<br><br>首先anaconda创建一个新的环境（推荐创建新的，免去包冲突的问题）<br></p><p><img src="/2023/03/23/Ai%E7%BB%98%E7%94%BB%E6%9C%AC%E5%9C%B0%E9%83%A8%E7%BD%B2%E4%BD%BF%E7%94%A8/1.png"></p><p>然后进入解压后的项目目录下，激活创建的环境，使用pip命令安装依赖包</p><p><img src="/2023/03/23/Ai%E7%BB%98%E7%94%BB%E6%9C%AC%E5%9C%B0%E9%83%A8%E7%BD%B2%E4%BD%BF%E7%94%A8/2.png"><br>注意：这里的requirements.txt文件可能会有冲突，因此我导出了我配置好环境的依赖文件，复制进去替换掉原来的内容，torch的版本需要根据自己显卡环境调整</p><figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br></pre></td><td class="code"><pre><code class="hljs apache"><span class="hljs-attribute">absl</span>-py==<span class="hljs-number">1</span>.<span class="hljs-number">4</span>.<span class="hljs-number">0</span><br><span class="hljs-attribute">accelerate</span>==<span class="hljs-number">0</span>.<span class="hljs-number">12</span>.<span class="hljs-number">0</span><br><span class="hljs-attribute">addict</span>==<span class="hljs-number">2</span>.<span class="hljs-number">4</span>.<span class="hljs-number">0</span><br><span class="hljs-attribute">aenum</span>==<span class="hljs-number">3</span>.<span class="hljs-number">1</span>.<span class="hljs-number">11</span><br><span class="hljs-attribute">aiofiles</span>==<span class="hljs-number">23</span>.<span class="hljs-number">1</span>.<span class="hljs-number">0</span><br><span class="hljs-attribute">aiohttp</span>==<span class="hljs-number">3</span>.<span class="hljs-number">8</span>.<span class="hljs-number">4</span><br><span class="hljs-attribute">aiosignal</span>==<span class="hljs-number">1</span>.<span class="hljs-number">3</span>.<span class="hljs-number">1</span><br><span class="hljs-attribute">altair</span>==<span class="hljs-number">4</span>.<span class="hljs-number">2</span>.<span class="hljs-number">2</span><br><span class="hljs-attribute">antlr4</span>-python3-runtime==<span class="hljs-number">4</span>.<span class="hljs-number">9</span>.<span class="hljs-number">3</span><br><span class="hljs-attribute">anyio</span>==<span class="hljs-number">3</span>.<span class="hljs-number">6</span>.<span class="hljs-number">2</span><br><span class="hljs-attribute">async</span>-timeout==<span class="hljs-number">4</span>.<span class="hljs-number">0</span>.<span class="hljs-number">2</span><br><span class="hljs-attribute">attrs</span>==<span class="hljs-number">22</span>.<span class="hljs-number">2</span>.<span class="hljs-number">0</span><br><span class="hljs-attribute">basicsr</span>==<span class="hljs-number">1</span>.<span class="hljs-number">4</span>.<span class="hljs-number">2</span><br><span class="hljs-attribute">beautifulsoup4</span>==<span class="hljs-number">4</span>.<span class="hljs-number">12</span>.<span class="hljs-number">0</span><br><span class="hljs-attribute">blendmodes</span>==<span class="hljs-number">2022</span><br><span class="hljs-attribute">boltons</span>==<span class="hljs-number">23</span>.<span class="hljs-number">0</span>.<span class="hljs-number">0</span><br><span class="hljs-attribute">cachetools</span>==<span class="hljs-number">5</span>.<span class="hljs-number">3</span>.<span class="hljs-number">0</span><br><span class="hljs-attribute">certifi</span>==<span class="hljs-number">2022</span>.<span class="hljs-number">12</span>.<span class="hljs-number">7</span><br><span class="hljs-attribute">chardet</span>==<span class="hljs-number">4</span>.<span class="hljs-number">0</span>.<span class="hljs-number">0</span><br><span class="hljs-attribute">charset</span>-normalizer==<span class="hljs-number">3</span>.<span class="hljs-number">1</span>.<span class="hljs-number">0</span><br><span class="hljs-attribute">clean</span>-fid==<span class="hljs-number">0</span>.<span class="hljs-number">1</span>.<span class="hljs-number">29</span><br><span class="hljs-attribute">click</span>==<span class="hljs-number">8</span>.<span class="hljs-number">1</span>.<span class="hljs-number">3</span><br><span class="hljs-attribute">clip</span> @ git+https://github.com/openai/clip.git@a9b1bf5920416aaeaec965c25dd9e8f98c864f16<br><span class="hljs-attribute">colorama</span>==<span class="hljs-number">0</span>.<span class="hljs-number">4</span>.<span class="hljs-number">6</span><br><span class="hljs-attribute">coloredlogs</span>==<span class="hljs-number">15</span>.<span class="hljs-number">0</span>.<span class="hljs-number">1</span><br><span class="hljs-attribute">contourpy</span>==<span class="hljs-number">1</span>.<span class="hljs-number">0</span>.<span class="hljs-number">7</span><br><span class="hljs-attribute">cssselect2</span>==<span class="hljs-number">0</span>.<span class="hljs-number">7</span>.<span class="hljs-number">0</span><br><span class="hljs-attribute">cycler</span>==<span class="hljs-number">0</span>.<span class="hljs-number">11</span>.<span class="hljs-number">0</span><br><span class="hljs-attribute">deprecation</span>==<span class="hljs-number">2</span>.<span class="hljs-number">1</span>.<span class="hljs-number">0</span><br><span class="hljs-attribute">docopt</span>==<span class="hljs-number">0</span>.<span class="hljs-number">6</span>.<span class="hljs-number">2</span><br><span class="hljs-attribute">einops</span>==<span class="hljs-number">0</span>.<span class="hljs-number">4</span>.<span class="hljs-number">1</span><br><span class="hljs-attribute">entrypoints</span>==<span class="hljs-number">0</span>.<span class="hljs-number">4</span><br><span class="hljs-attribute">facexlib</span>==<span class="hljs-number">0</span>.<span class="hljs-number">2</span>.<span class="hljs-number">5</span><br><span class="hljs-attribute">fastapi</span>==<span class="hljs-number">0</span>.<span class="hljs-number">90</span>.<span class="hljs-number">1</span><br><span class="hljs-attribute">ffmpy</span>==<span class="hljs-number">0</span>.<span class="hljs-number">3</span>.<span class="hljs-number">0</span><br><span class="hljs-attribute">filelock</span>==<span class="hljs-number">3</span>.<span class="hljs-number">10</span>.<span class="hljs-number">2</span><br><span class="hljs-attribute">filterpy</span>==<span class="hljs-number">1</span>.<span class="hljs-number">4</span>.<span class="hljs-number">5</span><br><span class="hljs-attribute">flatbuffers</span>==<span class="hljs-number">23</span>.<span class="hljs-number">3</span>.<span class="hljs-number">3</span><br><span class="hljs-attribute">font</span>-roboto==<span class="hljs-number">0</span>.<span class="hljs-number">0</span>.<span class="hljs-number">1</span><br><span class="hljs-attribute">fonts</span>==<span class="hljs-number">0</span>.<span class="hljs-number">0</span>.<span class="hljs-number">3</span><br><span class="hljs-attribute">fonttools</span>==<span class="hljs-number">4</span>.<span class="hljs-number">39</span>.<span class="hljs-number">2</span><br><span class="hljs-attribute">frozenlist</span>==<span class="hljs-number">1</span>.<span class="hljs-number">3</span>.<span class="hljs-number">3</span><br><span class="hljs-attribute">fsspec</span>==<span class="hljs-number">2023</span>.<span class="hljs-number">3</span>.<span class="hljs-number">0</span><br><span class="hljs-attribute">ftfy</span>==<span class="hljs-number">6</span>.<span class="hljs-number">1</span>.<span class="hljs-number">1</span><br><span class="hljs-attribute">future</span>==<span class="hljs-number">0</span>.<span class="hljs-number">18</span>.<span class="hljs-number">3</span><br><span class="hljs-attribute">gdown</span>==<span class="hljs-number">4</span>.<span class="hljs-number">6</span>.<span class="hljs-number">4</span><br><span class="hljs-attribute">gfpgan</span>==<span class="hljs-number">1</span>.<span class="hljs-number">3</span>.<span class="hljs-number">8</span><br><span class="hljs-attribute">gitdb</span>==<span class="hljs-number">4</span>.<span class="hljs-number">0</span>.<span class="hljs-number">10</span><br><span class="hljs-attribute">GitPython</span>==<span class="hljs-number">3</span>.<span class="hljs-number">1</span>.<span class="hljs-number">27</span><br><span class="hljs-attribute">google</span>-auth==<span class="hljs-number">2</span>.<span class="hljs-number">16</span>.<span class="hljs-number">2</span><br><span class="hljs-attribute">google</span>-auth-oauthlib==<span class="hljs-number">0</span>.<span class="hljs-number">4</span>.<span class="hljs-number">6</span><br><span class="hljs-attribute">gradio</span>==<span class="hljs-number">3</span>.<span class="hljs-number">16</span>.<span class="hljs-number">2</span><br><span class="hljs-attribute">grpcio</span>==<span class="hljs-number">1</span>.<span class="hljs-number">51</span>.<span class="hljs-number">3</span><br><span class="hljs-attribute">h11</span>==<span class="hljs-number">0</span>.<span class="hljs-number">12</span>.<span class="hljs-number">0</span><br><span class="hljs-attribute">httpcore</span>==<span class="hljs-number">0</span>.<span class="hljs-number">15</span>.<span class="hljs-number">0</span><br><span class="hljs-attribute">httpx</span>==<span class="hljs-number">0</span>.<span class="hljs-number">23</span>.<span class="hljs-number">3</span><br><span class="hljs-attribute">huggingface</span>-hub==<span class="hljs-number">0</span>.<span class="hljs-number">13</span>.<span class="hljs-number">3</span><br><span class="hljs-attribute">humanfriendly</span>==<span class="hljs-number">10</span>.<span class="hljs-number">0</span><br><span class="hljs-attribute">idna</span>==<span class="hljs-number">2</span>.<span class="hljs-number">10</span><br><span class="hljs-attribute">imageio</span>==<span class="hljs-number">2</span>.<span class="hljs-number">26</span>.<span class="hljs-number">1</span><br><span class="hljs-attribute">inflection</span>==<span class="hljs-number">0</span>.<span class="hljs-number">5</span>.<span class="hljs-number">1</span><br><span class="hljs-attribute">invisible</span>-watermark==<span class="hljs-number">0</span>.<span class="hljs-number">1</span>.<span class="hljs-number">5</span><br><span class="hljs-attribute">Jinja2</span>==<span class="hljs-number">3</span>.<span class="hljs-number">1</span>.<span class="hljs-number">2</span><br><span class="hljs-attribute">jsonmerge</span>==<span class="hljs-number">1</span>.<span class="hljs-number">8</span>.<span class="hljs-number">0</span><br><span class="hljs-attribute">jsonschema</span>==<span class="hljs-number">4</span>.<span class="hljs-number">17</span>.<span class="hljs-number">3</span><br><span class="hljs-attribute">kiwisolver</span>==<span class="hljs-number">1</span>.<span class="hljs-number">4</span>.<span class="hljs-number">4</span><br><span class="hljs-attribute">kornia</span>==<span class="hljs-number">0</span>.<span class="hljs-number">6</span>.<span class="hljs-number">7</span><br><span class="hljs-attribute">lark</span>==<span class="hljs-number">1</span>.<span class="hljs-number">1</span>.<span class="hljs-number">2</span><br><span class="hljs-attribute">lazy_loader</span>==<span class="hljs-number">0</span>.<span class="hljs-number">2</span><br><span class="hljs-attribute">linkify</span>-it-py==<span class="hljs-number">2</span>.<span class="hljs-number">0</span>.<span class="hljs-number">0</span><br><span class="hljs-attribute">llvmlite</span>==<span class="hljs-number">0</span>.<span class="hljs-number">39</span>.<span class="hljs-number">1</span><br><span class="hljs-attribute">lmdb</span>==<span class="hljs-number">1</span>.<span class="hljs-number">4</span>.<span class="hljs-number">0</span><br><span class="hljs-attribute">lpips</span>==<span class="hljs-number">0</span>.<span class="hljs-number">1</span>.<span class="hljs-number">4</span><br><span class="hljs-attribute">lxml</span>==<span class="hljs-number">4</span>.<span class="hljs-number">9</span>.<span class="hljs-number">2</span><br><span class="hljs-attribute">Markdown</span>==<span class="hljs-number">3</span>.<span class="hljs-number">4</span>.<span class="hljs-number">2</span><br><span class="hljs-attribute">markdown</span>-it-py==<span class="hljs-number">2</span>.<span class="hljs-number">2</span>.<span class="hljs-number">0</span><br><span class="hljs-attribute">MarkupSafe</span>==<span class="hljs-number">2</span>.<span class="hljs-number">1</span>.<span class="hljs-number">2</span><br><span class="hljs-attribute">matplotlib</span>==<span class="hljs-number">3</span>.<span class="hljs-number">7</span>.<span class="hljs-number">1</span><br><span class="hljs-attribute">mdit</span>-py-plugins==<span class="hljs-number">0</span>.<span class="hljs-number">3</span>.<span class="hljs-number">5</span><br><span class="hljs-attribute">mdurl</span>==<span class="hljs-number">0</span>.<span class="hljs-number">1</span>.<span class="hljs-number">2</span><br><span class="hljs-attribute">mpmath</span>==<span class="hljs-number">1</span>.<span class="hljs-number">3</span>.<span class="hljs-number">0</span><br><span class="hljs-attribute">multidict</span>==<span class="hljs-number">6</span>.<span class="hljs-number">0</span>.<span class="hljs-number">4</span><br><span class="hljs-attribute">networkx</span>==<span class="hljs-number">3</span>.<span class="hljs-number">0</span><br><span class="hljs-attribute">numba</span>==<span class="hljs-number">0</span>.<span class="hljs-number">56</span>.<span class="hljs-number">4</span><br><span class="hljs-attribute">numpy</span>==<span class="hljs-number">1</span>.<span class="hljs-number">23</span>.<span class="hljs-number">3</span><br><span class="hljs-attribute">oauthlib</span>==<span class="hljs-number">3</span>.<span class="hljs-number">2</span>.<span class="hljs-number">2</span><br><span class="hljs-attribute">omegaconf</span>==<span class="hljs-number">2</span>.<span class="hljs-number">2</span>.<span class="hljs-number">3</span><br><span class="hljs-attribute">onnx</span>==<span class="hljs-number">1</span>.<span class="hljs-number">13</span>.<span class="hljs-number">1</span><br><span class="hljs-attribute">onnxruntime</span>==<span class="hljs-number">1</span>.<span class="hljs-number">14</span>.<span class="hljs-number">1</span><br><span class="hljs-attribute">open</span>-clip-torch @ git+https://gitee.com/ufhy/open_clip.git@bb6e834e9c70d9c27d0dc3ecedeebeaeb1ffad6b<br><span class="hljs-attribute">opencv</span>-contrib-python==<span class="hljs-number">4.7.0.72</span><br><span class="hljs-attribute">opencv</span>-python==<span class="hljs-number">4.7.0.72</span><br><span class="hljs-attribute">orjson</span>==<span class="hljs-number">3</span>.<span class="hljs-number">8</span>.<span class="hljs-number">8</span><br><span class="hljs-attribute">packaging</span>==<span class="hljs-number">23</span>.<span class="hljs-number">0</span><br><span class="hljs-attribute">pandas</span>==<span class="hljs-number">1</span>.<span class="hljs-number">5</span>.<span class="hljs-number">3</span><br><span class="hljs-attribute">piexif</span>==<span class="hljs-number">1</span>.<span class="hljs-number">1</span>.<span class="hljs-number">3</span><br><span class="hljs-attribute">Pillow</span>==<span class="hljs-number">9</span>.<span class="hljs-number">4</span>.<span class="hljs-number">0</span><br><span class="hljs-attribute">pipreqs</span>==<span class="hljs-number">0</span>.<span class="hljs-number">4</span>.<span class="hljs-number">11</span><br><span class="hljs-attribute">protobuf</span>==<span class="hljs-number">3</span>.<span class="hljs-number">20</span>.<span class="hljs-number">0</span><br><span class="hljs-attribute">psutil</span>==<span class="hljs-number">5</span>.<span class="hljs-number">9</span>.<span class="hljs-number">4</span><br><span class="hljs-attribute">pyasn1</span>==<span class="hljs-number">0</span>.<span class="hljs-number">4</span>.<span class="hljs-number">8</span><br><span class="hljs-attribute">pyasn1</span>-modules==<span class="hljs-number">0</span>.<span class="hljs-number">2</span>.<span class="hljs-number">8</span><br><span class="hljs-attribute">pycryptodome</span>==<span class="hljs-number">3</span>.<span class="hljs-number">17</span><br><span class="hljs-attribute">pydantic</span>==<span class="hljs-number">1</span>.<span class="hljs-number">10</span>.<span class="hljs-number">7</span><br><span class="hljs-attribute">pyDeprecate</span>==<span class="hljs-number">0</span>.<span class="hljs-number">3</span>.<span class="hljs-number">2</span><br><span class="hljs-attribute">pydub</span>==<span class="hljs-number">0</span>.<span class="hljs-number">25</span>.<span class="hljs-number">1</span><br><span class="hljs-attribute">pyparsing</span>==<span class="hljs-number">3</span>.<span class="hljs-number">0</span>.<span class="hljs-number">9</span><br><span class="hljs-attribute">pyreadline3</span>==<span class="hljs-number">3</span>.<span class="hljs-number">4</span>.<span class="hljs-number">1</span><br><span class="hljs-attribute">pyrsistent</span>==<span class="hljs-number">0</span>.<span class="hljs-number">19</span>.<span class="hljs-number">3</span><br><span class="hljs-attribute">PySocks</span>==<span class="hljs-number">1</span>.<span class="hljs-number">7</span>.<span class="hljs-number">1</span><br><span class="hljs-attribute">python</span>-dateutil==<span class="hljs-number">2</span>.<span class="hljs-number">8</span>.<span class="hljs-number">2</span><br><span class="hljs-attribute">python</span>-multipart==<span class="hljs-number">0</span>.<span class="hljs-number">0</span>.<span class="hljs-number">6</span><br><span class="hljs-attribute">pytorch</span>-lightning==<span class="hljs-number">1</span>.<span class="hljs-number">7</span>.<span class="hljs-number">6</span><br><span class="hljs-attribute">pytz</span>==<span class="hljs-number">2022</span>.<span class="hljs-number">7</span>.<span class="hljs-number">1</span><br><span class="hljs-attribute">PyWavelets</span>==<span class="hljs-number">1</span>.<span class="hljs-number">4</span>.<span class="hljs-number">1</span><br><span class="hljs-attribute">PyYAML</span>==<span class="hljs-number">6</span>.<span class="hljs-number">0</span><br><span class="hljs-attribute">realesrgan</span>==<span class="hljs-number">0</span>.<span class="hljs-number">3</span>.<span class="hljs-number">0</span><br><span class="hljs-attribute">regex</span>==<span class="hljs-number">2023</span>.<span class="hljs-number">3</span>.<span class="hljs-number">22</span><br><span class="hljs-attribute">reportlab</span>==<span class="hljs-number">3</span>.<span class="hljs-number">6</span>.<span class="hljs-number">12</span><br><span class="hljs-attribute">requests</span>==<span class="hljs-number">2</span>.<span class="hljs-number">25</span>.<span class="hljs-number">1</span><br><span class="hljs-attribute">requests</span>-oauthlib==<span class="hljs-number">1</span>.<span class="hljs-number">3</span>.<span class="hljs-number">1</span><br><span class="hljs-attribute">resize</span>-right==<span class="hljs-number">0</span>.<span class="hljs-number">0</span>.<span class="hljs-number">2</span><br><span class="hljs-attribute">rfc3986</span>==<span class="hljs-number">1</span>.<span class="hljs-number">5</span>.<span class="hljs-number">0</span><br><span class="hljs-attribute">rsa</span>==<span class="hljs-number">4</span>.<span class="hljs-number">9</span><br><span class="hljs-attribute">safetensors</span>==<span class="hljs-number">0</span>.<span class="hljs-number">2</span>.<span class="hljs-number">7</span><br><span class="hljs-attribute">scikit</span>-image==<span class="hljs-number">0</span>.<span class="hljs-number">19</span>.<span class="hljs-number">2</span><br><span class="hljs-attribute">scipy</span>==<span class="hljs-number">1</span>.<span class="hljs-number">10</span>.<span class="hljs-number">1</span><br><span class="hljs-attribute">sentencepiece</span>==<span class="hljs-number">0</span>.<span class="hljs-number">1</span>.<span class="hljs-number">97</span><br><span class="hljs-attribute">six</span>==<span class="hljs-number">1</span>.<span class="hljs-number">16</span>.<span class="hljs-number">0</span><br><span class="hljs-attribute">smmap</span>==<span class="hljs-number">5</span>.<span class="hljs-number">0</span>.<span class="hljs-number">0</span><br><span class="hljs-attribute">sniffio</span>==<span class="hljs-number">1</span>.<span class="hljs-number">3</span>.<span class="hljs-number">0</span><br><span class="hljs-attribute">soupsieve</span>==<span class="hljs-number">2</span>.<span class="hljs-number">4</span><br><span class="hljs-attribute">starlette</span>==<span class="hljs-number">0</span>.<span class="hljs-number">23</span>.<span class="hljs-number">1</span><br><span class="hljs-attribute">svglib</span>==<span class="hljs-number">1</span>.<span class="hljs-number">5</span>.<span class="hljs-number">1</span><br><span class="hljs-attribute">sympy</span>==<span class="hljs-number">1</span>.<span class="hljs-number">11</span>.<span class="hljs-number">1</span><br><span class="hljs-attribute">tb</span>-nightly==<span class="hljs-number">2</span>.<span class="hljs-number">13</span>.<span class="hljs-number">0</span>a20230317<br><span class="hljs-attribute">tensorboard</span>==<span class="hljs-number">2</span>.<span class="hljs-number">12</span>.<span class="hljs-number">0</span><br><span class="hljs-attribute">tensorboard</span>-data-server==<span class="hljs-number">0</span>.<span class="hljs-number">7</span>.<span class="hljs-number">0</span><br><span class="hljs-attribute">tensorboard</span>-plugin-wit==<span class="hljs-number">1</span>.<span class="hljs-number">8</span>.<span class="hljs-number">1</span><br><span class="hljs-attribute">tifffile</span>==<span class="hljs-number">2023</span>.<span class="hljs-number">3</span>.<span class="hljs-number">21</span><br><span class="hljs-attribute">timm</span>==<span class="hljs-number">0</span>.<span class="hljs-number">6</span>.<span class="hljs-number">7</span><br><span class="hljs-attribute">tinycss2</span>==<span class="hljs-number">1</span>.<span class="hljs-number">2</span>.<span class="hljs-number">1</span><br><span class="hljs-attribute">tokenizers</span>==<span class="hljs-number">0</span>.<span class="hljs-number">13</span>.<span class="hljs-number">2</span><br><span class="hljs-attribute">toolz</span>==<span class="hljs-number">0</span>.<span class="hljs-number">12</span>.<span class="hljs-number">0</span><br><span class="hljs-attribute">torch</span>==<span class="hljs-number">1</span>.<span class="hljs-number">13</span>.<span class="hljs-number">1</span>+cu117<br><span class="hljs-attribute">torchaudio</span>==<span class="hljs-number">0</span>.<span class="hljs-number">13</span>.<span class="hljs-number">1</span>+cu117<br><span class="hljs-attribute">torchdiffeq</span>==<span class="hljs-number">0</span>.<span class="hljs-number">2</span>.<span class="hljs-number">3</span><br><span class="hljs-attribute">torchmetrics</span>==<span class="hljs-number">0</span>.<span class="hljs-number">11</span>.<span class="hljs-number">4</span><br><span class="hljs-attribute">torchsde</span>==<span class="hljs-number">0</span>.<span class="hljs-number">2</span>.<span class="hljs-number">5</span><br><span class="hljs-attribute">torchvision</span>==<span class="hljs-number">0</span>.<span class="hljs-number">14</span>.<span class="hljs-number">1</span>+cu117<br><span class="hljs-attribute">tqdm</span>==<span class="hljs-number">4</span>.<span class="hljs-number">65</span>.<span class="hljs-number">0</span><br><span class="hljs-attribute">trampoline</span>==<span class="hljs-number">0</span>.<span class="hljs-number">1</span>.<span class="hljs-number">2</span><br><span class="hljs-attribute">transformers</span>==<span class="hljs-number">4</span>.<span class="hljs-number">25</span>.<span class="hljs-number">1</span><br><span class="hljs-attribute">typing_extensions</span>==<span class="hljs-number">4</span>.<span class="hljs-number">5</span>.<span class="hljs-number">0</span><br><span class="hljs-attribute">uc</span>-micro-py==<span class="hljs-number">1</span>.<span class="hljs-number">0</span>.<span class="hljs-number">1</span><br><span class="hljs-attribute">urllib3</span>==<span class="hljs-number">1</span>.<span class="hljs-number">26</span>.<span class="hljs-number">15</span><br><span class="hljs-attribute">uvicorn</span>==<span class="hljs-number">0</span>.<span class="hljs-number">21</span>.<span class="hljs-number">1</span><br><span class="hljs-attribute">wcwidth</span>==<span class="hljs-number">0</span>.<span class="hljs-number">2</span>.<span class="hljs-number">6</span><br><span class="hljs-attribute">webencodings</span>==<span class="hljs-number">0</span>.<span class="hljs-number">5</span>.<span class="hljs-number">1</span><br><span class="hljs-attribute">websockets</span>==<span class="hljs-number">10</span>.<span class="hljs-number">4</span><br><span class="hljs-attribute">Werkzeug</span>==<span class="hljs-number">2</span>.<span class="hljs-number">2</span>.<span class="hljs-number">3</span><br><span class="hljs-attribute">yapf</span>==<span class="hljs-number">0</span>.<span class="hljs-number">32</span>.<span class="hljs-number">0</span><br><span class="hljs-attribute">yarg</span>==<span class="hljs-number">0</span>.<span class="hljs-number">1</span>.<span class="hljs-number">9</span><br><span class="hljs-attribute">yarl</span>==<span class="hljs-number">1</span>.<span class="hljs-number">8</span>.<span class="hljs-number">2</span><br></code></pre></td></tr></table></figure><p>在配置好环境后需要启动launch.py文件</p><p><img src="/2023/03/23/Ai%E7%BB%98%E7%94%BB%E6%9C%AC%E5%9C%B0%E9%83%A8%E7%BD%B2%E4%BD%BF%E7%94%A8/3.png"></p><p>启动时还可以配置参数：如python launch.py –no-half –no-half-vae –disable-nan-check</p><p>具体说明可以参见up主的教程和其他资料</p><p>下面是几张生成图的示例：</p><p>positive tags:</p><figure class="highlight mipsasm"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs mipsasm">(((masterpiece))),<span class="hljs-keyword">best </span>quality, illustration,(<span class="hljs-keyword">beautiful </span>detailed girl),<span class="hljs-keyword">beautiful </span>detailed glow,detailed ice,<span class="hljs-keyword">beautiful </span>detailed water,(<span class="hljs-keyword">beautiful </span>detailed eyes),expressionless,(floating palaces),azure hair,<span class="hljs-keyword">disheveled </span>hair,long <span class="hljs-keyword">bangs, </span>hairs <span class="hljs-keyword">between </span>eyes,(skyblue dress),<span class="hljs-keyword">black </span>ribbon,white <span class="hljs-keyword">bowties,midriff,&#123;&#123;&#123;half </span><span class="hljs-keyword">closed </span>eyes&#125;&#125;&#125;,<span class="hljs-keyword">big </span>forhead,<span class="hljs-keyword">blank </span>stare,flower,large top sleeves<br></code></pre></td></tr></table></figure><p>negative tags:</p><figure class="highlight mipsasm"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs mipsasm">owres,<span class="hljs-keyword">bad </span>anatomy,<span class="hljs-keyword">bad </span>hands,text,error,missing fingers,<span class="hljs-keyword">extra </span><span class="hljs-keyword">digit,fewer </span><span class="hljs-keyword">digits,cropped,worst </span>quality,low quality,<span class="hljs-keyword">normal </span>quality,<span class="hljs-keyword">jpeg </span>artifacts,signature,watermark,username,<span class="hljs-keyword">blurry,missing </span>fingers,<span class="hljs-keyword">bad </span>hands,missing arms,large <span class="hljs-keyword">breasts</span><br></code></pre></td></tr></table></figure><p><img src="/2023/03/23/Ai%E7%BB%98%E7%94%BB%E6%9C%AC%E5%9C%B0%E9%83%A8%E7%BD%B2%E4%BD%BF%E7%94%A8/4.png"></p><p><img src="/2023/03/23/Ai%E7%BB%98%E7%94%BB%E6%9C%AC%E5%9C%B0%E9%83%A8%E7%BD%B2%E4%BD%BF%E7%94%A8/6.png"></p><p><img src="/2023/03/23/Ai%E7%BB%98%E7%94%BB%E6%9C%AC%E5%9C%B0%E9%83%A8%E7%BD%B2%E4%BD%BF%E7%94%A8/i5.png"></p><p><img src="/2023/03/23/Ai%E7%BB%98%E7%94%BB%E6%9C%AC%E5%9C%B0%E9%83%A8%E7%BD%B2%E4%BD%BF%E7%94%A8/7.png"></p>]]></content>
    
    
    <categories>
      
      <category>AI绘画</category>
      
    </categories>
    
    
    <tags>
      
      <tag>stable_diffusion</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>shader基础</title>
    <link href="/2023/02/09/shader%E5%9F%BA%E7%A1%80/"/>
    <url>/2023/02/09/shader%E5%9F%BA%E7%A1%80/</url>
    
    <content type="html"><![CDATA[<p>shader：着色器<br></p><ul><li>GPU流水线上一些可高度编程的阶段，而由着色器编译出来的最终代码是会在 GPU上运行的（对于固定管线的渲染来说，着色器有时等同于一些特定的渲染设置);</li><li>有一些特定类型的着色器，如顶点着色器、片元着色器等;</li><li>依靠着色器我们可以控制流水线中的渲染细节,例如用顶点着色器来进行顶点变换以及传递数据，用片元着色器来进行逐像素的渲染。</li></ul><h1 id="渲染流水线"><a href="#渲染流水线" class="headerlink" title="渲染流水线: "></a>渲染流水线: <br></h1><ul><li>输入是一个虚拟摄像机、一些光源、一些shader以及纹理</li><li>输出渲染一张二维纹理</li><li>分为三个阶段：<strong>应用阶段(Application Stage)<strong>、</strong>几何阶段(Geometry Stage)<strong>、</strong>光栅化阶段(Rasterizer Stage)</strong><!-- ![流水线]() --><img src="/2023/02/09/shader%E5%9F%BA%E7%A1%80/%E6%B5%81%E6%B0%B4%E7%BA%BF.png"></li></ul><p><strong>应用阶段</strong>：</p><ol><li>准备好场景数据</li><li>粗粒度剔除(culling)工作，以把那些不可见的物体剔除出去</li><li>设置好每个模型的渲染状态。<br><br><strong>输出</strong>：渲染所需的几何信息，即**渲染图元（rendering primitives)**。通俗来讲，渲染图元可以是点、线、三角面等。这些渲染图元将会被传递给下一个阶段——几何阶段。</li></ol><p>应用阶段大致可分为下面3个阶段:</p><ol><li>把数据加载到显存中。</li><li>设置渲染状态。</li><li>调用Draw Call</li></ol><p><strong>渲染状态</strong>：<br><br>定义了场景中的网格是怎样被渲染的。例如，使用哪个顶点着色器（Vertex Shader)&#x2F;片元着色器(Fragment Shader)、光源属性、材质等。如果我们没有更改渲染状态，那么所有的网格都将使用同一种渲染状态。</p><p><strong>Draw Call</strong>:<br><br>实际上，Draw Call就是一个命令，它的发起方是 CPU，接收方是GPU。这个命令仅仅会指向一个需要被渲染的图元(primitives)列表,而不会再包含任何材质信息——这是因为我们已经在上一个阶段中完成了</p><p><strong>几何阶段</strong></p><ul><li>通常在GPU上进行</li><li>几何阶段负责和每个渲染图元打交道，进行逐顶点、逐多边形的操作</li><li>几何阶段的一个重要任务就是把顶点坐标变换到屏幕空间中，再交给光栅器进行处理<br><strong>输出</strong>：屏幕空间的二维顶点坐标、每个顶点对应的深度值、着色等相关信息，并传递给下一个阶段。</li></ul><p><strong>光栅化阶段</strong></p><ul><li>GPU 上运行</li><li>光栅化的任务主要是决定每个渲染图元中的哪些像素应该被绘制在屏幕上。</li><li>它需要对上一个阶段得到的逐顶点数据（例如纹理坐标、顶点颜色等)进行插值，然后再进行逐像素处理。</li></ul><h1 id="GPU流水线"><a href="#GPU流水线" class="headerlink" title="GPU流水线"></a>GPU流水线</h1><p><img src="/2023/02/09/shader%E5%9F%BA%E7%A1%80/gpu%E6%B5%81%E6%B0%B4%E7%BA%BF.png"><br>GPU的渲染流水线实现。颜色表示了不同阶段的可配置性或可编程性:绿色表示该流水线阶段是完全可编程控制的，黄色表示该流水线阶段可以配置但不是可编程的，蓝色表示该流水线阶段是由GPU固定实现的，开发者没有任何控制权。实线表示该Shader必须由开发者编程实现，虚线表示该Shader是可选的</p>]]></content>
    
    
    
    <tags>
      
      <tag>shader</tag>
      
    </tags>
    
  </entry>
  
  
  
  
</search>
