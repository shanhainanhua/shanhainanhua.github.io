

<!DOCTYPE html>
<html lang="zh-CN" data-default-color-scheme=dark>



<head>
  <meta charset="UTF-8">
  <link rel="apple-touch-icon" sizes="76x76" href="/img/fluid.png">
  <link rel="icon" href="/img/fluid.png">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=5.0, shrink-to-fit=no">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  
  <meta name="theme-color" content="#2f4154">
  <meta name="author" content="wantong">
  <meta name="keywords" content="">
  
    <meta name="description" content="总结计算机网络HTTP相关的面试题目和知识点">
<meta property="og:type" content="article">
<meta property="og:title" content="计网-HTTP">
<meta property="og:url" content="https://shanhainanhua.github.io/2023/08/12/%E8%AE%A1%E7%BD%91-HTTP/index.html">
<meta property="og:site_name" content="WT&#39;s blog">
<meta property="og:description" content="总结计算机网络HTTP相关的面试题目和知识点">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://shanhainanhua.github.io/2023/08/12/%E8%AE%A1%E7%BD%91-HTTP/image-20230812130837-3c6gjsb.png">
<meta property="og:image" content="https://shanhainanhua.github.io/2023/08/12/%E8%AE%A1%E7%BD%91-HTTP/image-20230812131140-4isjrsv.png">
<meta property="og:image" content="https://shanhainanhua.github.io/2023/08/12/%E8%AE%A1%E7%BD%91-HTTP/image-20230812135057-aq8xw72.png">
<meta property="og:image" content="https://shanhainanhua.github.io/2023/08/12/%E8%AE%A1%E7%BD%91-HTTP/image-20230812140914-jg3gwry.png">
<meta property="og:image" content="https://shanhainanhua.github.io/2023/08/12/%E8%AE%A1%E7%BD%91-HTTP/image-20230812140602-jwsz87r.png">
<meta property="og:image" content="https://shanhainanhua.github.io/2023/08/12/%E8%AE%A1%E7%BD%91-HTTP/image-20230812141245-hutq1te.png">
<meta property="og:image" content="https://shanhainanhua.github.io/2023/08/12/%E8%AE%A1%E7%BD%91-HTTP/image-20230812142930-7fg3bo8.png">
<meta property="article:published_time" content="2023-08-12T07:29:38.000Z">
<meta property="article:modified_time" content="2023-08-12T07:32:11.220Z">
<meta property="article:author" content="wantong">
<meta property="article:tag" content="计算机网络">
<meta name="twitter:card" content="summary_large_image">
<meta name="twitter:image" content="https://shanhainanhua.github.io/2023/08/12/%E8%AE%A1%E7%BD%91-HTTP/image-20230812130837-3c6gjsb.png">
  
  
    <meta name="referrer" content="no-referrer-when-downgrade">
  
  
  <title>计网-HTTP - WT&#39;s blog</title>

  <link  rel="stylesheet" href="https://lib.baomitu.com/twitter-bootstrap/4.6.1/css/bootstrap.min.css" />



  <link  rel="stylesheet" href="https://lib.baomitu.com/github-markdown-css/4.0.0/github-markdown.min.css" />

  <link  rel="stylesheet" href="https://lib.baomitu.com/hint.css/2.7.0/hint.min.css" />

  <link  rel="stylesheet" href="https://lib.baomitu.com/fancybox/3.5.7/jquery.fancybox.min.css" />



<!-- 主题依赖的图标库，不要自行修改 -->
<!-- Do not modify the link that theme dependent icons -->

<link rel="stylesheet" href="//at.alicdn.com/t/font_1749284_hj8rtnfg7um.css">



<link rel="stylesheet" href="//at.alicdn.com/t/font_1736178_lbnruvf0jn.css">


<link  rel="stylesheet" href="/css/main.css" />


  <link id="highlight-css" rel="stylesheet" href="/css/highlight.css" />
  
    <link id="highlight-css-dark" rel="stylesheet" href="/css/highlight-dark.css" />
  




  <script id="fluid-configs">
    var Fluid = window.Fluid || {};
    Fluid.ctx = Object.assign({}, Fluid.ctx)
    var CONFIG = {"hostname":"shanhainanhua.github.io","root":"/","version":"1.9.4","typing":{"enable":true,"typeSpeed":70,"cursorChar":"_","loop":false,"scope":[]},"anchorjs":{"enable":true,"element":"h1,h2,h3,h4,h5,h6","placement":"left","visible":"hover","icon":""},"progressbar":{"enable":true,"height_px":3,"color":"#29d","options":{"showSpinner":false,"trickleSpeed":100}},"code_language":{"enable":true,"default":"TEXT"},"copy_btn":true,"image_caption":{"enable":true},"image_zoom":{"enable":true,"img_url_replace":["",""]},"toc":{"enable":true,"placement":"right","headingSelector":"h1,h2,h3,h4,h5,h6","collapseDepth":0},"lazyload":{"enable":true,"loading_img":"/img/loading.gif","onlypost":false,"offset_factor":2},"web_analytics":{"enable":false,"follow_dnt":true,"baidu":null,"google":null,"gtag":null,"tencent":{"sid":null,"cid":null},"woyaola":null,"cnzz":null,"leancloud":{"app_id":null,"app_key":null,"server_url":null,"path":"window.location.pathname","ignore_local":false}},"search_path":"/local-search.xml"};

    if (CONFIG.web_analytics.follow_dnt) {
      var dntVal = navigator.doNotTrack || window.doNotTrack || navigator.msDoNotTrack;
      Fluid.ctx.dnt = dntVal && (dntVal.startsWith('1') || dntVal.startsWith('yes') || dntVal.startsWith('on'));
    }
  </script>
  <script  src="/js/utils.js" ></script>
  <script  src="/js/color-schema.js" ></script>
  


  
<meta name="generator" content="Hexo 6.3.0"></head>


<body>
  <div>
    <!--其中rgba中的a，指的是mask文件的alpha，透明度-->
	<div class='real_mask' style="
		background-color: rgba(0,0,0,0.3);
		width: 100%;
		height: 100%;
		position: fixed;
		z-index: -777;
	"></div>
	<div id="banner_video_insert">
	</div>	
	<div id='vvd_banner_img'>
	</div>
</div>
<div id="banner"></div>

  <header>
    

<div class="header-inner" style="height: 70vh;">
  <nav id="navbar" class="navbar fixed-top  navbar-expand-lg navbar-dark scrolling-navbar">
  <div class="container">
    <a class="navbar-brand" href="/">
      <strong>WT&#39;s blog</strong>
    </a>

    <button id="navbar-toggler-btn" class="navbar-toggler" type="button" data-toggle="collapse"
            data-target="#navbarSupportedContent"
            aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
      <div class="animated-icon"><span></span><span></span><span></span></div>
    </button>

    <!-- Collapsible content -->
    <div class="collapse navbar-collapse" id="navbarSupportedContent">
      <ul class="navbar-nav ml-auto text-center">
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/">
                <i class="iconfont icon-home-fill"></i>
                <span>首页</span>
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/archives/">
                <i class="iconfont icon-archive-fill"></i>
                <span>归档</span>
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/categories/">
                <i class="iconfont icon-category-fill"></i>
                <span>分类</span>
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/tags/">
                <i class="iconfont icon-tags-fill"></i>
                <span>标签</span>
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/about/">
                <i class="iconfont icon-user-fill"></i>
                <span>关于</span>
              </a>
            </li>
          
        
        
          <li class="nav-item" id="search-btn">
            <a class="nav-link" target="_self" href="javascript:;" data-toggle="modal" data-target="#modalSearch" aria-label="Search">
              <i class="iconfont icon-search"></i>
            </a>
          </li>
          
        
        
          <li class="nav-item" id="color-toggle-btn">
            <a class="nav-link" target="_self" href="javascript:;" aria-label="Color Toggle">
              <i class="iconfont icon-dark" id="color-toggle-icon"></i>
            </a>
          </li>
        
      </ul>
    </div>
  </div>
</nav>

  

<div id="banner" class="banner" parallax=true
     style="background: url('https://101.43.39.125/HexoFiles/new/bg-trans.png') no-repeat center center; background-size: cover;">
  <div class="full-bg-img">
    <div class="mask flex-center" style="background-color: rgba(0, 0, 0, 0)">
      <div class="banner-text text-center fade-in-up">
        <div class="h2">
          
            <span id="subtitle" data-typed-text="计网-HTTP"></span>
          
        </div>

        
          
  <div class="mt-3">
    
    
  </div>

  <div class="mt-1">
    
      <span class="post-meta mr-2">
        <i class="iconfont icon-chart"></i>
        
          6.3k 字
        
      </span>
    

    
      <span class="post-meta mr-2">
        <i class="iconfont icon-clock-fill"></i>
        
        
        
          53 分钟
        
      </span>
    

    
    
      
        <span id="busuanzi_container_page_pv" style="display: none">
          <i class="iconfont icon-eye" aria-hidden="true"></i>
          <span id="busuanzi_value_page_pv"></span> 次
        </span>
        
      
    
  </div>


        
      </div>

      
    </div>
  </div>
</div>

</div>

	<script type="text/javascript" src="/vvd_js/jquery.js"></script>

	<div class="banner" id='banner' >

		<div class="full-bg-img" >

			
				<script>
					var ua = navigator.userAgent;
					var ipad = ua.match(/(iPad).*OS\s([\d_]+)/),
						isIphone = !ipad && ua.match(/(iPhone\sOS)\s([\d_]+)/),
						isAndroid = ua.match(/(Android)\s+([\d.]+)/),
						isMobile = isIphone || isAndroid;

					function set_video_attr(id){

						var height = document.body.clientHeight
						var width = document.body.clientWidth
						var video_item = document.getElementById(id);

						if (height / width < 0.56){
							video_item.setAttribute('width', '100%');
							video_item.setAttribute('height', 'auto');
						} else {
							video_item.setAttribute('height', '100%');
							video_item.setAttribute('width', 'auto');
						}
					}

					$.getJSON('/vvd_js/video_url.json', function(data){
						if (true){
							var video_list_length = data.length
							var seed = Math.random()
							index = Math.floor(seed * video_list_length)
							
							video_url = data[index][0]
							pre_show_image_url = data[index][1]
							
							banner_obj = document.getElementById("banner")
							banner_obj.style.cssText = "background: url('" + pre_show_image_url + "') no-repeat; background-size: cover;"

							vvd_banner_obj = document.getElementById("vvd_banner_img")

							vvd_banner_content = "<img id='banner_img_item' src='" + pre_show_image_url + "' style='height: 100%; position: fixed; z-index: -999'>"
							vvd_banner_obj.innerHTML = vvd_banner_content
							set_video_attr('banner_img_item')

							if (!isMobile) {
								video_html_res = "<video id='video_item' style='position: fixed; z-index: -888;'  muted='muted' src=" + video_url + " autoplay='autoplay' loop='loop'></video>"
								document.getElementById("banner_video_insert").innerHTML = video_html_res;
								set_video_attr('video_item')
							}
						}
					});

					if (!isMobile){
						window.onresize = function(){
							set_video_attr('video_item')
							}
						}
				</script>
			
			</div>
		</div>
    </div>
  </header>

  <main>
    
      

<div class="container-fluid nopadding-x">
  <div class="row nomargin-x">
    <div class="side-col d-none d-lg-block col-lg-2">
      

    </div>

    <div class="col-lg-8 nopadding-x-md">
      <div class="container nopadding-x-md" id="board-ctn">
        <div id="board">
          <article class="post-content mx-auto">
            <!-- SEO header -->
            <h1 style="display: none">计网-HTTP</h1>
            
            
              <div class="markdown-body">
                
                <p>总结计算机网络HTTP相关的面试题目和知识点</p>
<span id="more"></span>

<p>HTTP常见题目分类：<br>​<img src="/2023/08/12/%E8%AE%A1%E7%BD%91-HTTP/image-20230812130837-3c6gjsb.png" srcset="/img/loading.gif" lazyload alt="image">​</p>
<h1 id="1、HTTP基本概念"><a href="#1、HTTP基本概念" class="headerlink" title="1、HTTP基本概念"></a>1、HTTP基本概念</h1><h2 id="什么是HTTP？"><a href="#什么是HTTP？" class="headerlink" title="什么是HTTP？"></a>什么是HTTP？</h2><p>　　<strong>HTTP 是一个在计算机世界里专门在「两点」之间「传输」文字、图片、音频、视频等「超文本」数据的「约定和规范」。</strong></p>
<blockquote>
<p>那「HTTP 是用于从互联网服务器传输超文本到本地浏览器的协议」，这种说法正确吗？</p>
</blockquote>
<p>　　这种说法是<strong>不正确</strong>的。因为也可以是「服务器&lt; – &gt;服务器」，所以采用<strong>两点之间</strong>的描述会更准确</p>
<h2 id="HTTP常见状态码有哪些？"><a href="#HTTP常见状态码有哪些？" class="headerlink" title="HTTP常见状态码有哪些？"></a>HTTP常见状态码有哪些？</h2><p>　　​<img src="/2023/08/12/%E8%AE%A1%E7%BD%91-HTTP/image-20230812131140-4isjrsv.png" srcset="/img/loading.gif" lazyload alt="image">​</p>
<p>　　​<code>1xx</code>​ 类状态码属于<strong>提示信息</strong>，是协议处理中的一种中间状态，实际用到的比较少。</p>
<p>　　​<code>2xx</code>​ 类状态码表示服务器<strong>成功</strong>处理了客户端的请求</p>
<ul>
<li>「<strong>200 OK</strong>」是最常见的成功状态码，表示一切正常。如果是非 <code>HEAD</code>​ 请求，服务器返回的响应头都会有 body 数据。</li>
<li>「<strong>204 No Content</strong>」也是常见的成功状态码，与 200 OK 基本相同，但响应头没有 body 数据。</li>
<li>「<strong>206 Partial Content</strong>」是应用于 HTTP 分块下载或断点续传，表示响应返回的 body 数据并不是资源的全部，而是其中的一部分，也是服务器处理成功的状态。</li>
</ul>
<p>　　​<code>3xx</code>​ 类状态码表示客户端请求的资源发生了变动，需要客户端用新的 URL 重新发送请求获取资源，也就是<strong>重定向</strong>。</p>
<ul>
<li>「<strong>301 Moved Permanently</strong>」表示永久重定向，说明请求的资源已经不存在了，需改用新的 URL 再次访问。</li>
<li>「<strong>302 Found</strong>」表示临时重定向，说明请求的资源还在，但暂时需要用另一个 URL 来访问。</li>
</ul>
<p>　　301 和 302 都会在响应头里使用字段 <code>Location</code>​，指明后续要跳转的 URL，浏览器会自动重定向新的 URL。</p>
<ul>
<li>「<strong>304 Not Modified</strong>」不具有跳转的含义，表示资源未修改，重定向已存在的缓冲文件，也称缓存重定向，也就是告诉客户端可以继续使用缓存资源，用于缓存控制。</li>
</ul>
<p>　　​<code>4xx</code>​ 类状态码表示客户端发送的<strong>报文有误</strong>，服务器无法处理，也就是错误码的含义。</p>
<ul>
<li>「<strong>400 Bad Request</strong>」表示客户端请求的报文有错误，但只是个笼统的错误。</li>
<li>「<strong>403 Forbidden</strong>」表示服务器禁止访问资源，并不是客户端的请求出错。</li>
<li>「<strong>404 Not Found</strong>」表示请求的资源在服务器上不存在或未找到，所以无法提供给客户端。</li>
</ul>
<p>　　​<code>5xx</code>​ 类状态码表示客户端请求报文正确，但是<strong>服务器处理时内部发生了错误</strong>，属于服务器端的错误码。</p>
<ul>
<li>「<strong>500 Internal Server Error</strong>」与 400 类型，是个笼统通用的错误码，服务器发生了什么错误，我们并不知道。</li>
<li>「<strong>501 Not Implemented</strong>」表示客户端请求的功能还不支持，类似“即将开业，敬请期待”的意思。</li>
<li>「<strong>502 Bad Gateway</strong>」通常是服务器作为网关或代理时返回的错误码，表示服务器自身工作正常，访问后端服务器发生了错误。</li>
<li>「<strong>503 Service Unavailable</strong>」表示服务器当前很忙，暂时无法响应客户端，类似“网络服务正忙，请稍后重试”的意思</li>
</ul>
<p>　　500记忆方法： 先问有没有这个功能 有的话通过网关代理访问  然后最后是服务器无响应</p>
<p>　　400系列也是一样，先确认你有没有权限能不能访问 然后再确认有没有</p>
<h2 id="HTTP常见字段有哪些？"><a href="#HTTP常见字段有哪些？" class="headerlink" title="HTTP常见字段有哪些？"></a>HTTP常见字段有哪些？</h2><p>　　<strong>Host字段</strong>：客户端发送请求时，用来指定服务器的域名。</p>
<p>　　<strong>Content-Length</strong>字段：服务器在返回数据时，会有Content-Length字段，表示本次回应的数据长度。HTTP 协议通过设置回车符、换行符作为 HTTP header 的边界，通过 Content-Length 字段作为 HTTP body 的边界，这两个方式都是为了解决“粘包”的问题。什么是TCP拆包和粘包问题？怎么解决？</p>
<p>　　<strong>Connection</strong>字段：常用于客户端要求服务器使用HTTP长连接机制，以便其他请求复用。</p>
<p>　　<a target="_blank" rel="noopener" href="https://xiaolincoding.com/network/3_tcp/tcp_http_keepalive.html#http-%E7%9A%84-keep-alive">4.15 TCP Keepalive 和 HTTP Keep-Alive 是一个东西吗？ | 小林coding (xiaolincoding.com)</a></p>
<p>　　<strong>Content-Type</strong>字段：用于服务器回应时，告诉客户端，本次数据是什么格式。客户端请求的时候，可以使用 <code>Accept</code>​ 字段声明自己可以接受哪些数据格式。</p>
<p>　　<strong>Content-Type</strong>字段说明数据的压缩方法。表示服务器返回的数据使用了什么压缩格式。客户端在请求时，用 <code>Accept-Encoding</code>​ 字段说明自己可以接受哪些压缩方法。</p>
<h2 id="HTTP断点续传原理？"><a href="#HTTP断点续传原理？" class="headerlink" title="HTTP断点续传原理？"></a>HTTP断点续传原理？</h2><p>　　<a target="_blank" rel="noopener" href="https://www.jianshu.com/p/012c8a4dc661">HTTP必知必会——断点续传原理 - 简书 (jianshu.com)</a></p>
<p>　　简单来说多了 Range和Content-Range字段，来确认续传位置 同时返回码也变为206</p>
<h1 id="GET和POST？"><a href="#GET和POST？" class="headerlink" title="GET和POST？"></a>GET和POST？</h1><p>　　先说明下安全和幂等的概念：</p>
<ul>
<li>在 HTTP 协议里，所谓的「安全」是指请求方法不会「破坏」服务器上的资源。</li>
<li>所谓的「幂等」，意思是多次执行相同的操作，结果都是「相同」的。</li>
</ul>
<p>　　GET 的语义是请求获取指定的资源。GET 方法是安全、幂等、可被缓存的。</p>
<p>　　POST 的语义是根据请求负荷（报文主体）对指定的资源做出处理，具体的处理方式视资源类型而不同。POST 不安全，不幂等，（大部分实现）不可缓存</p>
<blockquote>
<p>RFC 规范并没有规定 GET 请求不能带 body 的。理论上，任何请求都可以带 body 的。只是因为 RFC 规范定义的 GET 请求是获取资源，所以根据这个语义不需要用到 body。</p>
<p>另外，URL 中的查询参数也不是 GET 所独有的，POST 请求的 URL 中也可以有参数的</p>
</blockquote>
<h2 id="除了POST和GET，你还知道什么及其作用（HTTP有哪些请求方法）？"><a href="#除了POST和GET，你还知道什么及其作用（HTTP有哪些请求方法）？" class="headerlink" title="除了POST和GET，你还知道什么及其作用（HTTP有哪些请求方法）？"></a>除了POST和GET，你还知道什么及其作用（HTTP有哪些请求方法）？</h2><table>
<thead>
<tr>
<th align="center">请求</th>
<th align="center">作用</th>
</tr>
</thead>
<tbody><tr>
<td align="center">GET</td>
<td align="center">请求页面，并返回页面内容</td>
</tr>
<tr>
<td align="center">POST</td>
<td align="center">大多用于提交表单或者上传文件，数据包括在body中</td>
</tr>
<tr>
<td align="center">HEAD</td>
<td align="center">类似于GET请求，只不过返回的响应中没有具体的内容，用于获取包头</td>
</tr>
<tr>
<td align="center">PUT</td>
<td align="center">从客户端向服务器传送的数据取代指定文档中的内容</td>
</tr>
<tr>
<td align="center">DELETE</td>
<td align="center">请求服务器删除指定的页面</td>
</tr>
<tr>
<td align="center">CONNECT</td>
<td align="center">服务器当作跳板，让服务器代替客户端访问其他网页</td>
</tr>
<tr>
<td align="center">OPTIONS</td>
<td align="center">允许客户端查看服务器的性能</td>
</tr>
<tr>
<td align="center">TRACE</td>
<td align="center">回显服务器收到的请求，主要用于测试或者诊断</td>
</tr>
</tbody></table>
<h1 id="为什么HTTP是无状态的？"><a href="#为什么HTTP是无状态的？" class="headerlink" title="为什么HTTP是无状态的？"></a>为什么HTTP是无状态的？</h1><p>　　<a target="_blank" rel="noopener" href="https://blog.csdn.net/mr_zhangxg/article/details/88580236">HTTP协议为什么是无状态的？无状态指的是什么_名称解释 完全无状态是什么意思_窝窝头蘸番茄酱的博客-CSDN博客</a></p>
<p>　　简而言之，最初http协议只是浏览静态文件，无状态足够，后面加一层就行，维持状态负担太大。</p>
<p>　　实现有状态：cookies，session，application</p>
<p>　　​<img src="/2023/08/12/%E8%AE%A1%E7%BD%91-HTTP/image-20230812135057-aq8xw72.png" srcset="/img/loading.gif" lazyload alt="image">​</p>
<h1 id="如果浏览器禁用Cookie，如何记录HTTP状态信息？"><a href="#如果浏览器禁用Cookie，如何记录HTTP状态信息？" class="headerlink" title="如果浏览器禁用Cookie，如何记录HTTP状态信息？"></a>如果浏览器禁用Cookie，如何记录HTTP状态信息？</h1><p>　　如果浏览器禁用Cookie，如何记录HTTP状态信息？</p>
<p>　　一种方法是<strong>使用URL重写，把会话ID附加在HTML页面中所有的URL上</strong>，这样每次请求时会话ID都会作为URL的一部分发送回服务器。</p>
<p>　　另一种方法是<strong>在登录成功后将会话ID返回给前端，然后前端通过其他可用的数据持久化技术，将会话ID保存在客户端硬盘中</strong>​<a target="_blank" rel="noopener" href="https://www.bing.com/ck/a?!&&p=70b3cb00ffcf2132JmltdHM9MTY5MTcxMjAwMCZpZ3VpZD0xY2RmZjg0OS1mYzI1LTY1ODQtMTVjMS1lYTEyZmQ2ZjY0YTImaW5zaWQ9NTU4NA&ptn=3&hsh=3&fclid=1cdff849-fc25-6584-15c1-ea12fd6f64a2&psq=%E5%A6%82%E6%9E%9C%E6%B5%8F%E8%A7%88%E5%99%A8%E7%A6%81%E7%94%A8+Cookie%EF%BC%8C%E5%A6%82%E4%BD%95%E8%AE%B0%E5%BD%95+HTTP+%E7%8A%B6%E6%80%81%E4%BF%A1%E6%81%AF%EF%BC%9F&u=a1aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2h1emhlbnY1L2FydGljbGUvZGV0YWlscy8xMDQ1Mjc0MTY&ntb=1">^2^</a>，然后在后续的请求中，根据浏览器是否禁用Cookie来判断是否需要将”;jsessionid&#x3D;xxx”加入到请求的URL末尾。</p>
<h1 id="如果让你来设计Cookie，你会怎么实现？"><a href="#如果让你来设计Cookie，你会怎么实现？" class="headerlink" title="如果让你来设计Cookie，你会怎么实现？"></a>如果让你来设计Cookie，你会怎么实现？</h1><p>　　需要为 Cookie 设置一个有效时间</p>
<p>　　需要为 Cookie 设置路径</p>
<p>　　使用一个唯一的标识符作为 Cookie 的键，然后在服务器端保存与该标识符相关的用户信息。这样可以避免在 Cookie 中直接存储用户信息，提高安全性和效率。</p>
<h1 id="如果让你来设计-Session，你会怎么实现？"><a href="#如果让你来设计-Session，你会怎么实现？" class="headerlink" title="如果让你来设计 Session，你会怎么实现？"></a>如果让你来设计 Session，你会怎么实现？</h1><ul>
<li>用户首次访问时生成唯一ID(<code>session_id</code>​)</li>
<li>根据session_id作为唯一标示，生成session_id为名称的文件(储存session内容，当然也可以存到redis或者mysql中)</li>
<li>通过cookie下发<code>session_id</code>​到客户端</li>
<li>用户再次访问时会通过cookie将<code>session_id</code>​带上</li>
<li>服务端通过<code>session_id</code>​获取对应的session内容(文件、Cache、数据库)</li>
</ul>
<h1 id="HTTP1-0-x2F-1-1-x2F-2-x2F-3区别？"><a href="#HTTP1-0-x2F-1-1-x2F-2-x2F-3区别？" class="headerlink" title="HTTP1.0&#x2F;1.1&#x2F;2&#x2F;3区别？"></a>HTTP1.0&#x2F;1.1&#x2F;2&#x2F;3区别？</h1><p>　　​<img src="/2023/08/12/%E8%AE%A1%E7%BD%91-HTTP/image-20230812140914-jg3gwry.png" srcset="/img/loading.gif" lazyload alt="image">​</p>
<p>　　HTTP1.0：短连接</p>
<p>　　HTTP1.1：长连接，管道传输   HTTP层队头阻塞</p>
<p>　　HTTP2：  TCP层队头阻塞</p>
<p>　　基于HTTPS，安全保障；</p>
<p>　　<strong>头部压缩</strong>（头信息表，发送头索引），<strong>二进制格式</strong>（头信息帧，数据帧），<strong>并发传输</strong>（Stream复用连接，&#x3D;&gt;Message&#x3D;&gt;frame），<strong>服务器主动推送资源</strong></p>
<p>　　​<img src="/2023/08/12/%E8%AE%A1%E7%BD%91-HTTP/image-20230812140602-jwsz87r.png" srcset="/img/loading.gif" lazyload alt="image">​</p>
<p>　　客户端和服务器<strong>双方都可以建立 Stream</strong>， Stream ID 也是有区别的，客户端建立的 Stream 必须是奇数号，而服务器建立的 Stream 必须是偶数号。</p>
<p>　　HTTP3</p>
<p>　　改下层TCP为UDP，使用基于UDP的QUIC协议实现可靠传输。</p>
<p>　　QUIC特点：</p>
<ol>
<li>无队头阻塞 只会阻塞stream</li>
<li>更快的连接建立</li>
<li>连接迁移</li>
</ol>
<p>　　​<img src="/2023/08/12/%E8%AE%A1%E7%BD%91-HTTP/image-20230812141245-hutq1te.png" srcset="/img/loading.gif" lazyload alt="image">​</p>
<blockquote>
<p>QUIC 协议没有用四元组的方式来“绑定”连接，而是通过<strong>连接 ID</strong> 来标记通信的两个端点，客户端和服务器可以各自选择一组 ID 来标记自己，因此即使移动设备的网络变化后，导致 IP 地址变化了，只要仍保有上下文信息（比如连接 ID、TLS 密钥等），就可以“无缝”地复用原连接，消除重连的成本，没有丝毫卡顿感，达到了<strong>连接迁移</strong>的功能</p>
</blockquote>
<h1 id="HTTP缓存技术？"><a href="#HTTP缓存技术？" class="headerlink" title="HTTP缓存技术？"></a>HTTP缓存技术？</h1><p>　　对于一些具有重复性的 HTTP 请求，比如每次请求得到的数据都一样的，我们可以把这对「请求-响应」的数据都<strong>缓存在本地</strong>，那么下次就直接读取本地的数据</p>
<p>　　缓存实现方式：强制缓存和协商缓存</p>
<p>　　强缓存指的是只要浏览器判断缓存没有过期，则直接使用浏览器的本地缓存，决定是否使用缓存的主动性在于浏览器这边</p>
<p>　　强缓存是利用下面这两个 HTTP 响应头部（Response Header）字段实现的，它们都用来表示资源在客户端缓存的有效期：</p>
<ul>
<li>​<code>Cache-Control</code>​， 是一个相对时间；</li>
<li>​<code>Expires</code>​，是一个绝对时间；</li>
</ul>
<p>　　通过比较过期时间和请求资源时间来计算出资源是否过期</p>
<p>　　<strong>协商缓存就是与服务端协商之后，通过协商结果来判断是否使用本地缓存</strong>。</p>
<p>　　​<img src="/2023/08/12/%E8%AE%A1%E7%BD%91-HTTP/image-20230812142930-7fg3bo8.png" srcset="/img/loading.gif" lazyload alt="image">​</p>
<h1 id="HTTP特性？"><a href="#HTTP特性？" class="headerlink" title="HTTP特性？"></a>HTTP特性？</h1><p>　　HTTP最突出的优点是简单、灵活和易于扩展、应用广泛和跨平台。</p>
<p>　　其他的就分版本特性展开讲。</p>
<h1 id="HTTPS-从客户端到服务器端全流程，包括-CA-验证体系"><a href="#HTTPS-从客户端到服务器端全流程，包括-CA-验证体系" class="headerlink" title="HTTPS 从客户端到服务器端全流程，包括 CA 验证体系"></a>HTTPS 从客户端到服务器端全流程，包括 CA 验证体系</h1><p>　　HTTPS 是如何解决三个风险的？</p>
<ul>
<li><strong>混合加密</strong>的方式实现信息的<strong>机密性</strong>，解决了窃听的风险。</li>
<li><strong>摘要算法</strong>的方式来实现<strong>完整性</strong>，它能够为数据生成独一无二的「指纹」，指纹用于校验数据的完整性，解决了篡改的风险。</li>
<li>将服务器公钥放入到<strong>数字证书</strong>中，解决了冒充的风险。</li>
</ul>
<p>　　SSL&#x2F;TLS 协议基本流程：</p>
<ul>
<li>客户端向服务器索要并验证服务器的公钥。</li>
<li>双方协商生产「会话秘钥」。</li>
<li>双方采用「会话秘钥」进行加密通信。</li>
</ul>
<p>　　前两步也就是 SSL&#x2F;TLS 的建立过程，也就是 TLS 握手阶段。</p>
<p>　　TLS 的「握手阶段」涉及<strong>四次</strong>通信，使用不同的密钥交换算法，TLS 握手流程也会不一样的，现在常用的密钥交换算法有两种：<a target="_blank" rel="noopener" href="https://xiaolincoding.com/network/2_http/https_rsa.html">RSA 算法 </a>​<a target="_blank" rel="noopener" href="https://xiaolincoding.com/network/2_http/https_rsa.html"><strong>(opens new window)</strong></a>和 <a target="_blank" rel="noopener" href="https://xiaolincoding.com/network/2_http/https_ecdhe.html">ECDHE 算法 </a>​<a target="_blank" rel="noopener" href="https://xiaolincoding.com/network/2_http/https_ecdhe.html"><strong>(opens new window)</strong></a>。</p>
<h2 id="TLS-协议建立的详细流程"><a href="#TLS-协议建立的详细流程" class="headerlink" title="TLS 协议建立的详细流程"></a>TLS 协议建立的详细流程</h2><p>　　<em>1. ClientHello</em></p>
<p>　　首先，由客户端向服务器发起加密通信请求，也就是 <code>ClientHello</code>​ 请求。</p>
<p>　　在这一步，客户端主要向服务器发送以下信息：</p>
<p>　　（1）客户端支持的 TLS 协议版本，如 TLS 1.2 版本。</p>
<p>　　（2）客户端生产的随机数（<code>Client Random</code>​），后面用于生成「会话秘钥」条件之一。</p>
<p>　　（3）客户端支持的密码套件列表，如 RSA 加密算法。</p>
<p>　　<em>2. SeverHello</em></p>
<p>　　服务器收到客户端请求后，向客户端发出响应，也就是 <code>SeverHello</code>​。服务器回应的内容有如下内容：</p>
<p>　　（1）确认 TLS 协议版本，如果浏览器不支持，则关闭加密通信。</p>
<p>　　（2）服务器生产的随机数（<code>Server Random</code>​），也是后面用于生产「会话秘钥」条件之一。</p>
<p>　　（3）确认的密码套件列表，如 RSA 加密算法。</p>
<p>　　（4）服务器的数字证书。</p>
<p>　　<em>3.客户端回应</em></p>
<p>　　客户端收到服务器的回应之后，首先通过浏览器或者操作系统中的 CA 公钥，确认服务器的数字证书的真实性。</p>
<p>　　如果证书没有问题，客户端会<strong>从数字证书中取出服务器的公钥</strong>，然后使用它加密报文，向服务器发送如下信息：</p>
<p>　　（1）一个随机数（<code>pre-master key</code>​）。该随机数会被服务器公钥加密。</p>
<p>　　（2）加密通信算法改变通知，表示随后的信息都将用「会话秘钥」加密通信。</p>
<p>　　（3）客户端握手结束通知，表示客户端的握手阶段已经结束。这一项同时把之前所有内容的发生的数据做个摘要，用来供服务端校验。</p>
<p>　　上面第一项的随机数是整个握手阶段的第三个随机数，会发给服务端，所以这个随机数客户端和服务端都是一样的。</p>
<p>　　<strong>服务器和客户端有了这三个随机数（Client Random、Server Random、pre-master key），接着就用双方协商的加密算法，各自生成本次通信的「会话秘钥」</strong>。</p>
<p>　　<em>4. 服务器的最后回应</em></p>
<p>　　服务器收到客户端的第三个随机数（<code>pre-master key</code>​）之后，通过协商的加密算法，计算出本次通信的「会话秘钥」。</p>
<p>　　然后，向客户端发送最后的信息：</p>
<p>　　（1）加密通信算法改变通知，表示随后的信息都将用「会话秘钥」加密通信。</p>
<p>　　（2）服务器握手结束通知，表示服务器的握手阶段已经结束。这一项同时把之前所有内容的发生的数据做个摘要，用来供客户端校验。</p>
<p>　　至此，整个 TLS 的握手阶段全部结束。接下来，客户端与服务器进入加密通信，就完全是使用普通的 HTTP 协议，只不过用「会话秘钥」加密内容。</p>
<p>　　‍</p>
<h2 id="CA验证体系"><a href="#CA验证体系" class="headerlink" title="CA验证体系"></a>CA验证体系</h2><p>　　CA 签发证书的过程：</p>
<ul>
<li>首先 CA 会把持有者的公钥、用途、颁发者、有效时间等信息打成一个包，然后对这些信息进行 Hash 计算，得到一个 Hash 值；</li>
<li>然后 CA 会使用自己的私钥将该 Hash 值加密，生成 Certificate Signature，也就是 CA 对证书做了签名；</li>
<li>最后将 Certificate Signature 添加在文件证书上，形成数字证书；</li>
</ul>
<p>　　客户端校验服务端的数字证书的过程：</p>
<ul>
<li>首先客户端会使用同样的 Hash 算法获取该证书的 Hash 值 H1；</li>
<li>通常浏览器和操作系统中集成了 CA 的公钥信息，浏览器收到证书后可以使用 CA 的公钥解密 Certificate Signature 内容，得到一个 Hash 值 H2 ；</li>
<li>最后比较 H1 和 H2，如果值相同，则为可信赖的证书，否则则认为证书不可信。</li>
</ul>
<p>　　HTTP数据保证完整性：TLS记录协议。</p>
<p>　　TLS 在实现上分为<strong>握手协议</strong>和<strong>记录协议</strong>两层：</p>
<ul>
<li>TLS 握手协议即TLS 四次握手的过程，负责协商加密算法和生成对称密钥，后续用此密钥来保护应用程序数据（即 HTTP 数据）；</li>
<li>TLS 记录协议负责保护应用程序数据并验证其完整性和来源，所以对 HTTP 数据加密是使用记录协议；</li>
</ul>
<p>　　TLS 记录协议主要负责消息（HTTP 数据）的压缩，加密及数据的认证</p>
<p>　　具体过程如下：</p>
<ul>
<li>首先，消息被分割成多个较短的片段,然后分别对每个片段进行压缩。</li>
<li>接下来，经过压缩的片段会被<strong>加上消息认证码（MAC 值，这个是通过哈希算法生成的），这是为了保证完整性，并进行数据的认证</strong>。通过附加消息认证码的 MAC 值，可以识别出篡改。与此同时，为了防止重放攻击，在计算消息认证码时，还加上了片段的编码。</li>
<li>再接下来，经过压缩的片段再加上消息认证码会一起通过对称密码进行加密。</li>
<li>最后，上述经过加密的数据再加上由数据类型、版本号、压缩后的长度组成的报头就是最终的报文数据。</li>
</ul>
<p>　　记录协议完成后，最终的报文数据将传递到传输控制协议 (TCP) 层进行传输。</p>
<p>　　‍</p>
<h1 id="知道哪些非对称密钥算法？"><a href="#知道哪些非对称密钥算法？" class="headerlink" title="知道哪些非对称密钥算法？"></a>知道哪些非对称密钥算法？</h1><p>　　<a target="_blank" rel="noopener" href="https://www.jianshu.com/p/5c6a12cfdd26">非对称加密算法 (RSA、DSA、ECC、DH) - 简书 (jianshu.com)</a></p>
<h1 id="对称加密和非对称加密的适用场景"><a href="#对称加密和非对称加密的适用场景" class="headerlink" title="对称加密和非对称加密的适用场景"></a>对称加密和非对称加密的适用场景</h1><p>　　对称场景：加密会话</p>
<p>　　非对称：<strong>签名</strong>(&#x3D;&#x3D;服务端加签、客户端解签验证&#x3D;&#x3D;)、加解密</p>
<p>　　对称加密主要的运算是<strong>位运算</strong>，速度非常快，如果使用硬件计算，速度会更快</p>
<p>　　非对称加密计算一般都比较复杂，比如 RSA，它里面涉及到大数乘法、大数模等等运算，速度较慢</p>

                
              </div>
            
            <hr/>
            <div>
              <div class="post-metas my-3">
  
    <div class="post-meta mr-3 d-flex align-items-center">
      <i class="iconfont icon-category"></i>
      

<span class="category-chains">
  
  
    
      <span class="category-chain">
        
  <a href="/categories/%E5%85%AB%E8%82%A1/" class="category-chain-item">八股</a>
  
  

      </span>
    
  
</span>

    </div>
  
  
    <div class="post-meta">
      <i class="iconfont icon-tags"></i>
      
        <a href="/tags/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/">#计算机网络</a>
      
    </div>
  
</div>


              
  

  <div class="license-box my-3">
    <div class="license-title">
      <div>计网-HTTP</div>
      <div>https://shanhainanhua.github.io/2023/08/12/计网-HTTP/</div>
    </div>
    <div class="license-meta">
      
        <div class="license-meta-item">
          <div>作者</div>
          <div>wantong</div>
        </div>
      
      
        <div class="license-meta-item license-meta-date">
          <div>发布于</div>
          <div>2023年8月12日</div>
        </div>
      
      
      
        <div class="license-meta-item">
          <div>许可协议</div>
          <div>
            
              
              
                <a target="_blank" href="https://creativecommons.org/licenses/by/4.0/">
                  <span class="hint--top hint--rounded" aria-label="BY - 署名">
                    <i class="iconfont icon-by"></i>
                  </span>
                </a>
              
            
          </div>
        </div>
      
    </div>
    <div class="license-icon iconfont"></div>
  </div>



              
                <div class="post-prevnext my-3">
                  <article class="post-prev col-6">
                    
                    
                  </article>
                  <article class="post-next col-6">
                    
                    
                      <a href="/2023/08/11/C++11%E7%89%B9%E6%80%A7/" title="C++11特性">
                        <span class="hidden-mobile">C++11特性</span>
                        <span class="visible-mobile">下一篇</span>
                        <i class="iconfont icon-arrowright"></i>
                      </a>
                    
                  </article>
                </div>
              
            </div>

            
          </article>
        </div>
      </div>
    </div>

    <div class="side-col d-none d-lg-block col-lg-2">
      
  <aside class="sidebar" style="margin-left: -1rem">
    <div id="toc">
  <p class="toc-header">
    <i class="iconfont icon-list"></i>
    <span>目录</span>
  </p>
  <div class="toc-body" id="toc-body"></div>
</div>



  </aside>


    </div>
  </div>
</div>





  



  



  



  



  







    

    
      <a id="scroll-top-button" aria-label="TOP" href="#" role="button">
        <i class="iconfont icon-arrowup" aria-hidden="true"></i>
      </a>
    

    
      <div class="modal fade" id="modalSearch" tabindex="-1" role="dialog" aria-labelledby="ModalLabel"
     aria-hidden="true">
  <div class="modal-dialog modal-dialog-scrollable modal-lg" role="document">
    <div class="modal-content">
      <div class="modal-header text-center">
        <h4 class="modal-title w-100 font-weight-bold">搜索</h4>
        <button type="button" id="local-search-close" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body mx-3">
        <div class="md-form mb-5">
          <input type="text" id="local-search-input" class="form-control validate">
          <label data-error="x" data-success="v" for="local-search-input">关键词</label>
        </div>
        <div class="list-group" id="local-search-result"></div>
      </div>
    </div>
  </div>
</div>

    

    
  </main>

  <footer>
    <div class="footer-inner">
  
    <div class="footer-content">
       <a href="https://hexo.io" target="_blank" rel="nofollow noopener"><span>Hexo</span></a> <i class="iconfont icon-love"></i> <a href="https://github.com/fluid-dev/hexo-theme-fluid" target="_blank" rel="nofollow noopener"><span>Fluid</span></a> 
    </div>
  
  
  
  
</div>

  </footer>

  <!-- Scripts -->
  
  <script  src="https://lib.baomitu.com/nprogress/0.2.0/nprogress.min.js" ></script>
  <link  rel="stylesheet" href="https://lib.baomitu.com/nprogress/0.2.0/nprogress.min.css" />

  <script>
    NProgress.configure({"showSpinner":false,"trickleSpeed":100})
    NProgress.start()
    window.addEventListener('load', function() {
      NProgress.done();
    })
  </script>


<script  src="https://lib.baomitu.com/jquery/3.6.0/jquery.min.js" ></script>
<script  src="https://lib.baomitu.com/twitter-bootstrap/4.6.1/js/bootstrap.min.js" ></script>
<script  src="/js/events.js" ></script>
<script  src="/js/plugins.js" ></script>


  <script  src="https://lib.baomitu.com/typed.js/2.0.12/typed.min.js" ></script>
  <script>
    (function (window, document) {
      var typing = Fluid.plugins.typing;
      var subtitle = document.getElementById('subtitle');
      if (!subtitle || !typing) {
        return;
      }
      var text = subtitle.getAttribute('data-typed-text');
      
        typing(text);
      
    })(window, document);
  </script>




  
    <script  src="/js/img-lazyload.js" ></script>
  




  
<script>
  Fluid.utils.createScript('https://lib.baomitu.com/tocbot/4.18.2/tocbot.min.js', function() {
    var toc = jQuery('#toc');
    if (toc.length === 0 || !window.tocbot) { return; }
    var boardCtn = jQuery('#board-ctn');
    var boardTop = boardCtn.offset().top;

    window.tocbot.init(Object.assign({
      tocSelector     : '#toc-body',
      contentSelector : '.markdown-body',
      linkClass       : 'tocbot-link',
      activeLinkClass : 'tocbot-active-link',
      listClass       : 'tocbot-list',
      isCollapsedClass: 'tocbot-is-collapsed',
      collapsibleClass: 'tocbot-is-collapsible',
      scrollSmooth    : true,
      includeTitleTags: true,
      headingsOffset  : -boardTop,
    }, CONFIG.toc));
    if (toc.find('.toc-list-item').length > 0) {
      toc.css('visibility', 'visible');
    }

    Fluid.events.registerRefreshCallback(function() {
      if ('tocbot' in window) {
        tocbot.refresh();
        var toc = jQuery('#toc');
        if (toc.length === 0 || !tocbot) {
          return;
        }
        if (toc.find('.toc-list-item').length > 0) {
          toc.css('visibility', 'visible');
        }
      }
    });
  });
</script>


  <script src=https://lib.baomitu.com/clipboard.js/2.0.11/clipboard.min.js></script>

  <script>Fluid.plugins.codeWidget();</script>


  
<script>
  Fluid.utils.createScript('https://lib.baomitu.com/anchor-js/4.3.1/anchor.min.js', function() {
    window.anchors.options = {
      placement: CONFIG.anchorjs.placement,
      visible  : CONFIG.anchorjs.visible
    };
    if (CONFIG.anchorjs.icon) {
      window.anchors.options.icon = CONFIG.anchorjs.icon;
    }
    var el = (CONFIG.anchorjs.element || 'h1,h2,h3,h4,h5,h6').split(',');
    var res = [];
    for (var item of el) {
      res.push('.markdown-body > ' + item.trim());
    }
    if (CONFIG.anchorjs.placement === 'left') {
      window.anchors.options.class = 'anchorjs-link-left';
    }
    window.anchors.add(res.join(', '));

    Fluid.events.registerRefreshCallback(function() {
      if ('anchors' in window) {
        anchors.removeAll();
        var el = (CONFIG.anchorjs.element || 'h1,h2,h3,h4,h5,h6').split(',');
        var res = [];
        for (var item of el) {
          res.push('.markdown-body > ' + item.trim());
        }
        if (CONFIG.anchorjs.placement === 'left') {
          anchors.options.class = 'anchorjs-link-left';
        }
        anchors.add(res.join(', '));
      }
    });
  });
</script>


  
<script>
  Fluid.utils.createScript('https://lib.baomitu.com/fancybox/3.5.7/jquery.fancybox.min.js', function() {
    Fluid.plugins.fancyBox();
  });
</script>


  <script>Fluid.plugins.imageCaption();</script>

  <script  src="/js/local-search.js" ></script>

  <script defer src="https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js" ></script>





<!-- 主题的启动项，将它保持在最底部 -->
<!-- the boot of the theme, keep it at the bottom -->
<script  src="/js/boot.js" ></script>


  

  <noscript>
    <div class="noscript-warning">博客在允许 JavaScript 运行的环境下浏览效果更佳</div>
  </noscript>
</body>
</html>
